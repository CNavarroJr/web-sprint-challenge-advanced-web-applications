{"ast":null,"code":"var _jsxFileName = \"/Users/cjuniordse/Desktop/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState('');\n  const history = useHistory();\n\n  const handleChange = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  useEffect(() => {\n    localStorage.getItem('bubbleToken') && history.push('/bubbles');\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axiosWithAuth().post('/login', credentials).then(res => {\n      setError('');\n      localStorage.setItem('bubbleToken', res.data.payload);\n      history.push('/bubbles');\n    }).catch(err => {\n      console.log(err.message);\n      setError(err.message);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Welcome to the Bubble App!\"), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"username\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Username:\", React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"username\",\n    name: \"username\",\n    value: credentials.username,\n    onChange: handleChange,\n    label: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Password:\", React.createElement(\"input\", {\n    type: \"text\",\n    name: \"password\",\n    value: credentials.password,\n    onChange: handleChange,\n    label: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Login\"), error && React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Sorry, this log in did not work\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/cjuniordse/Desktop/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js"],"names":["React","useState","useEffect","axios","useHistory","axiosWithAuth","Login","credentials","setCredentials","username","password","error","setError","history","handleChange","e","target","name","value","localStorage","getItem","push","handleSubmit","preventDefault","post","then","res","setItem","data","payload","catch","err","console","log","message","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport { axiosWithAuth } from \"../utils/axiosWithAuth\";\n\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  })\n\n  const [error, setError] = useState('')\n  const history = useHistory()\n\n\n  const handleChange = e => {\n    setCredentials({...credentials, [e.target.name]: e.target.value})\n  }\n\n\n  useEffect(() => {\n    localStorage.getItem('bubbleToken') && history.push('/bubbles')\n  })\n\n  const handleSubmit = e => {\n    e.preventDefault()\n      axiosWithAuth().post('/login', credentials)\n      .then(res => {\n        setError('')\n        localStorage.setItem('bubbleToken', res.data.payload)\n        history.push('/bubbles')\n      })\n      .catch(err => {\n        console.log(err.message)\n        setError(err.message)\n      })\n  }\n\n  return (\n    <div>\n      <h1>Welcome to the Bubble App!</h1>\n\n      <form>\n        <label htmlFor='username' onSubmit={handleSubmit}>\n          Username:\n          <input type='text' placeholder='username' name='username' value={credentials.username} onChange={handleChange} label='username' />  \n        </label>  \n\n        <label htmlFor='password' onSubmit={handleSubmit}>\n          Password:\n          <input type='text' name='password' value={credentials.password} onChange={handleChange} label='password' />\n        </label>\n\n        <button onClick={handleSubmit}>Login</button>\n          {/* this is for the error message */}\n        {error && <p style={{ color: 'red' }}>Sorry, this log in did not work</p>}\n      </form>\n\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}